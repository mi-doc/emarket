{% extends 'base.html' %}
{% load static %}

{% block content %}

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="text-center">Страница заказа</h3>
                    <hr>

                    <table class="table text-left">
                        <thead>
                            <tr>
                                <th>Название товара</th>
                                <th>Количество</th>
                                <th>Цена за единицу</th>
                                <th>Общая цена</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for product_in_basket in products_in_basket %}
                                <tr data-id="{{ product_in_basket.id }}">
                                    <td>
                                        {{ product_in_basket.product.name }}
                                    </td>
                                    <td>
                                        <input value="{{ product_in_basket.nmb }}" type="number"
                                               class="num-products-input checkout" min="1">
                                    </td>
                                    <td>
                                        <span class="product-price">
                                            {{ product_in_basket.price_per_item }}
                                        </span>
                                    </td>
                                    <td>
                                        <span class="total-product-price">
                                            {{ product_in_basket.total_price }}
                                        </span>
                                    </td>
                                    <td>
                                        <button type="button" class="close checkout-delete-from-basket" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                <hr>
                <div class="text-right">
                    <h4><b>Сумма заказа: </b> <span class="total_price checkout">{{ products_total_price }}</span> руб.</h4>
                </div>
                <hr>

                <form class="form-block col-lg-4 col-lg-offset-4" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label>Ваше имя</label>
                        <span class="form-error">{{ form.name.errors }}</span>
                        <input type="text" class="form-control" name="{{ form.name.html_name }}"
                               placeholder="Михаил Николаев" value="{{ request.POST.name }}"
                        >
                    </div>

                    <div class="form-group">
                        <label>Телефон</label>
                        <span class="form-error">{{ form.phone.errors }}</span>
                        <input type="text" class="form-control" name="{{ form.phone.html_name }}"
                               placeholder="+7 777 777 7777" value="{{ request.POST.phone }}"
                        >
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <span class="form-error">{{ form.email.errors }}</span>
                        <input type="email" class="form-control" name="{{ form.email.html_name }}"
                               placeholder="name@example.com" value="{{ request.POST.email }}"
                        >
                    </div>

                    <button type="submit" class="btn btn-primary">Заказать</button>
                    <hr>
                </form>


{#                <form id="form_change_product">#}
{#                    {% csrf_token %}#}
{##}
{#                    <div class="row">#}
{#                        <div class="text-center">#}
{#                                <h4><b>Сумма заказа: </b> <span class="total_price">{{ products_total_price }}</span> руб.</h4>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                    <hr>#}
{##}
{#                    <div class="row">#}
{#                        <div class="form-group">#}
{#                            <div class="text-center">#}
{#                                <label>Ваше имя</label>#}
{#                                <span class="form-error">{{ form.name.errors }}</span>#}
{#                                <input type="text" name="{{ form.name.html_name }}" class="form-control"#}
{#                                    value="{{ request.POST.name }}"#}
{#                                >#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                    <div class="row">#}
{#                        <div class="form-group">#}
{#                            <div class="text-center">#}
{#                                 <label>Телефон</label>#}
{#                                 <span class="form-error">{{ form.phone.errors }}</span>#}
{#                                <input type="text" name="{{ form.phone.html_name }}" class="form-control"#}
{#                                    value="{{ request.POST.phone }}"#}
{#                                >#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                    <hr>#}
{##}
{#                    <div class="row">#}
{#                        <div class="text-center">#}
{#                                <button type="submit" class="btn btn-primary btn-lg">Заказать</button>#}
{#                        </div>#}
{#                    </div>#}
{##}
{#                </form>#}
            </div>
        </div>
    </div>

{% endblock %}